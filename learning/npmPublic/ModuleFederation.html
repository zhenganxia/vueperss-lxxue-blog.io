<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基于Module Federation的微前端方案 | 峖小虾技术网站</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/vueperss-lxxue-blog /images/headericon.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/vueperss-lxxue-blog /assets/css/0.styles.db5bc11e.css" as="style"><link rel="preload" href="/vueperss-lxxue-blog /assets/js/app.3155d336.js" as="script"><link rel="preload" href="/vueperss-lxxue-blog /assets/js/2.ac09cdb1.js" as="script"><link rel="preload" href="/vueperss-lxxue-blog /assets/js/17.5b9f9268.js" as="script"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/10.914e5d75.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/11.b40cb2cc.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/12.87c1630c.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/13.d744b37a.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/14.bd7deac5.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/15.4209fa1c.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/16.3d35cd6c.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/18.76448ae8.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/19.c860875c.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/20.ee131da7.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/21.34a7c8d3.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/22.c64ad50a.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/23.60e79192.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/24.849db006.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/25.9bb2464d.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/26.4627bad3.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/27.ab7df7ae.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/28.0089a65f.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/29.cece4905.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/3.6ccde555.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/30.85fd11ae.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/31.e7148e9a.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/32.9d3acf3c.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/33.96c342c4.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/34.4321cc0a.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/35.05369d83.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/36.85118c34.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/37.eebd1feb.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/38.8a4830f8.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/39.398fa3f6.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/4.0a1b88ac.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/40.37f55043.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/41.07a7c272.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/42.9d6dce5f.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/43.6cbab44e.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/44.d3dacaa5.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/45.48359a3b.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/46.88b29a2c.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/47.528440e0.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/48.e613f32c.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/49.7f0428b7.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/5.7fbce41b.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/50.9cb8087a.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/51.54243078.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/52.2858f577.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/53.00a327a8.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/54.836d59b4.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/55.6bac600d.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/56.f148728f.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/57.4380dc0a.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/58.db7c8550.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/59.24009366.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/6.7f2458e3.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/60.f908ce15.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/61.aa2526a7.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/62.1fae23d3.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/63.c53ecc1f.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/64.cbccfea3.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/65.36199392.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/66.ecc9f6c6.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/67.2708adc4.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/68.69279f87.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/69.9f9f05bc.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/7.fe8c9e94.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/70.e142cfff.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/71.9217fc01.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/72.c15f70df.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/73.8255ced4.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/74.a2f6495a.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/75.9b9eab28.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/76.3545a331.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/77.fd419702.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/78.13cf4677.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/79.c3ed30fd.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/8.1ff9f0e3.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/80.9296eef9.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/81.aa03c702.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/82.8f6f0c67.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/83.185cc323.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/84.05f59535.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/85.744dcbfa.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/86.71dc67db.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/87.ae051b58.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/88.73f132c2.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/89.d9ef0498.js"><link rel="prefetch" href="/vueperss-lxxue-blog /assets/js/9.3ca8ea77.js">
    <link rel="stylesheet" href="/vueperss-lxxue-blog /assets/css/0.styles.db5bc11e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vueperss-lxxue-blog /" class="home-link router-link-active"><img src="/vueperss-lxxue-blog /images/headericon.png" alt="峖小虾技术网站" class="logo"> <span class="site-name can-hide">峖小虾技术网站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日常工具" class="dropdown-title"><span class="title">日常工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="日常工具" class="mobile-dropdown-title"><span class="title">日常工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.json.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Json在线解析
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://caniuse.com/?search=flex-start/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Can i use
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/justify-content/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微前端" class="dropdown-title"><span class="title">微前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="微前端" class="mobile-dropdown-title"><span class="title">微前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://single-spa.js.org/docs/getting-started-overview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  single-spa
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://qiankun.umijs.org/zh/guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  qiankun
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://webpack.docschina.org/concepts/module-federation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack模块联邦
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关注" class="dropdown-title"><span class="title">关注</span> <span class="arrow down"></span></button> <button type="button" aria-label="关注" class="mobile-dropdown-title"><span class="title">关注</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          UI框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://element.eleme.cn/#/zh-CN/component/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://2x.antdv.com/components/overview-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant Design Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://es6.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ES6
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.cnblogs.com/mengfangui/p/13885589.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ES2020
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://typescript.bootcss.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          构建工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://webpack.docschina.org/concepts/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Webpack
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://webpack.docschina.org/concepts/module-federation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Webpack-模块联邦
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vitejs.dev/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vite
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          适配
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/postcss-pxtorem/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postcss-pxtorem
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/postcss-px2rem/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postcss-px2rem
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/postcss-plugin-px2rem/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postcss-plugin-px2rem
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日常工具" class="dropdown-title"><span class="title">日常工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="日常工具" class="mobile-dropdown-title"><span class="title">日常工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.json.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Json在线解析
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://caniuse.com/?search=flex-start/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Can i use
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/justify-content/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微前端" class="dropdown-title"><span class="title">微前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="微前端" class="mobile-dropdown-title"><span class="title">微前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://single-spa.js.org/docs/getting-started-overview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  single-spa
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://qiankun.umijs.org/zh/guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  qiankun
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://webpack.docschina.org/concepts/module-federation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack模块联邦
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关注" class="dropdown-title"><span class="title">关注</span> <span class="arrow down"></span></button> <button type="button" aria-label="关注" class="mobile-dropdown-title"><span class="title">关注</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          UI框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://element.eleme.cn/#/zh-CN/component/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://2x.antdv.com/components/overview-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant Design Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://es6.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ES6
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.cnblogs.com/mengfangui/p/13885589.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ES2020
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://typescript.bootcss.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          构建工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://webpack.docschina.org/concepts/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Webpack
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://webpack.docschina.org/concepts/module-federation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Webpack-模块联邦
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vitejs.dev/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vite
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          适配
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/postcss-pxtorem/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postcss-pxtorem
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/postcss-px2rem/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postcss-px2rem
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/postcss-plugin-px2rem/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postcss-plugin-px2rem
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>扩展</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueperss-lxxue-blog /learning/npmPublic/vuePress.html" class="sidebar-link">vuePress+gitPage</a></li><li><a href="/vueperss-lxxue-blog /learning/npmPublic/docsify.html" class="sidebar-link">docsify</a></li><li><a href="/vueperss-lxxue-blog /learning/npmPublic/ModuleFederation.html" aria-current="page" class="active sidebar-link">ModuleFederation</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>源码</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueperss-lxxue-blog /learning/sourceCode/promise.html" class="sidebar-link">promise</a></li><li><a href="/vueperss-lxxue-blog /learning/sourceCode/axios.html" class="sidebar-link">axios</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueperss-lxxue-blog /learning/algorithm/data.html" class="sidebar-link">数据结构</a></li><li><a href="/vueperss-lxxue-blog /learning/algorithm/sum.html" class="sidebar-link">求和</a></li><li><a href="/vueperss-lxxue-blog /learning/algorithm/sort.html" class="sidebar-link">排序</a></li><li><a href="/vueperss-lxxue-blog /learning/algorithm/others.html" class="sidebar-link">其他</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="基于module-federation的微前端方案"><a href="#基于module-federation的微前端方案" class="header-anchor">#</a> 基于Module Federation的微前端方案</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>node.js(npm 包管理器), 要求 node12+ <br>
vue-cli 脚手架工具，要求版本 v5.0.0 版本（不然无法使用 module federation）<br>
cnpm 或 yarn</p></div> <h4 id="安装依赖"><a href="#安装依赖" class="header-anchor">#</a> 安装依赖</h4> <div class="language-js extra-class"><pre class="language-js"><code>yarn install <span class="token operator">|</span> npm install
</code></pre></div><h4 id="本地开发"><a href="#本地开发" class="header-anchor">#</a> 本地开发</h4> <div class="language-js extra-class"><pre class="language-js"><code>yarn start
</code></pre></div><h4 id="构建生产环境"><a href="#构建生产环境" class="header-anchor">#</a> 构建生产环境</h4> <div class="language-js extra-class"><pre class="language-js"><code>yarn build
</code></pre></div><h4 id="格式化-lint-命令"><a href="#格式化-lint-命令" class="header-anchor">#</a> 格式化 lint 命令</h4> <div class="language-js extra-class"><pre class="language-js"><code>yarn lint
</code></pre></div><h4 id="别名"><a href="#别名" class="header-anchor">#</a> 别名</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;@api/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/api/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;@assets/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/assets/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;@components/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/components/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;@directives/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/directives/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;@packages/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/packages/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;@plugins/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/plugins/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;@router/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/router/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;@store/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/store/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;@utils/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/utils/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;@views/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/views/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
注意：需要在jsconfig<span class="token punctuation">.</span>json和vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js都要配置
</code></pre></div><h4 id="全局组件注册"><a href="#全局组件注册" class="header-anchor">#</a> 全局组件注册</h4> <p>注册全局组件的目录于 plugins 文件夹下面，所有需要全局注册的组件都应当放于此目录。比如全局的 icon、component、router、element-ui 等</p> <h4 id="本地文件"><a href="#本地文件" class="header-anchor">#</a> 本地文件</h4> <p>本地文件本地资源文件存放在 public/static 下面，目前本地环境变量文件和版本号是存放在此文件下</p> <h4 id="lint-说明"><a href="#lint-说明" class="header-anchor">#</a> lint 说明</h4> <p>Windows 电脑 clone 代码后，在执行 pre-commit 时，会出现如下错误：</p> <div class="language-js extra-class"><pre class="language-js"><code>Delete <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">␍</span><span class="token template-punctuation string">`</span></span><span class="token function">eslint</span><span class="token punctuation">(</span>prettier<span class="token operator">/</span>prettier<span class="token punctuation">)</span>
</code></pre></div><p>罪魁祸首是git的一个配置属性：core.autocrlf</p> <p>由于历史原因，windows 下和 linux 下的文本文件的换行符不一致。</p> <ul><li><p>Windows在换行的时候，同时使用了回车符CR(carriage-return character)和换行符LF(linefeed character)</p></li> <li><p>而Mac和Linux系统，仅仅使用了换行符LF</p></li> <li><p>老版本的Mac系统使用的是回车符CR
因此，文本文件在不同系统下创建和使用时就会出现不兼容的问题。</p></li></ul> <p>解决办法</p> <p>方法一
终端执行命令</p> <div class="language-js extra-class"><pre class="language-js"><code>yarn lint
</code></pre></div><p>由于 vscode 会有缓存，执行完建议重启 vscode</p> <p>方法二（推荐）
现在 VScode，Notepad++编辑器都能够自动识别文件的换行符是 LF 还是 CRLF。 如果你用的是 windows，文件编码是 UTF-8 且包含中文，最好全局将 autocrlf 设置为 false。</p> <div class="language-js extra-class"><pre class="language-js"><code>git config <span class="token operator">--</span>global core<span class="token punctuation">.</span>autocrlf <span class="token boolean">false</span>
注意：git全局配置之后，你需要重新拉取代码。
</code></pre></div><h4 id="模块联邦使用方法"><a href="#模块联邦使用方法" class="header-anchor">#</a> 模块联邦使用方法</h4> <p>module federation是一个 plugin，因此在 vue-cli 中，在 configureWebpack 新增一个 plugin 即可，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Configure Module Federation</span>
  config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'erpMain'</span><span class="token punctuation">,</span> <span class="token comment">// Must be unique</span>
      filename<span class="token operator">:</span> <span class="token string">'remoteEntry.js'</span><span class="token punctuation">,</span>
      exposes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'./share-components'</span><span class="token operator">:</span> <span class="token string">'./src/shared/components.js'</span><span class="token punctuation">,</span>
        <span class="token string">'./share-directives'</span><span class="token operator">:</span> <span class="token string">'./src/shared/directives.js'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      remotes<span class="token operator">:</span> <span class="token punctuation">{</span>
        erpOrder<span class="token operator">:</span> <span class="token constant">IS_PROD</span>
          <span class="token operator">?</span> <span class="token string">'erpOrder@http://erp-order-frontend/remoteEntry.js'</span> <span class="token comment">// 跟运维约定的线上地址</span>
          <span class="token operator">:</span> <span class="token string">'erpOrder@http://localhost:8001/remoteEntry.js'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
注<span class="token operator">:</span>

name 值必须唯一，建议使用当前模块的英文名，要求使用小驼峰形式
exposes 暴露的组件，key 值必须是<span class="token string">'./xxx'</span>
开发环境时，子应用需配置 publicPath
</code></pre></div><ol><li>静态引入</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">loadingComponent</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'erpOrder/PendingOrder'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>2.动态引入</p> <p>动态使用时，remotes 可以不用配置，封装了一套动态使用的方法utils/dynamicRemote中的loadRemoteComponent方法，使用如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> loadRemoteComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@utils/dynamicRemote'</span>
 
<span class="token keyword">const</span> <span class="token function-variable function">dyComponent</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> <span class="token function">loadRemoteComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token string">'http://localhost:8001/remoteEntry.js'</span><span class="token punctuation">,</span> <span class="token comment">// remoteEntry的远程地址</span>
  scope<span class="token operator">:</span> <span class="token string">'erpOrder'</span><span class="token punctuation">,</span> <span class="token comment">// 作用域，即对应项目中module federation配置的name值</span>
  module<span class="token operator">:</span> <span class="token string">'./PendingOrder'</span><span class="token punctuation">,</span> <span class="token comment">// 暴露出来的组件名称，即对应项目exposes中的指定key值</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="主子应用联调注意"><a href="#主子应用联调注意" class="header-anchor">#</a> 主子应用联调注意</h4> <p>vue 中可以全局注册组件，在主应用调用子应用模块时，需将子应用中全局注册的组件或指令在主应用中注册；<br>
整个应用中，子应用 module federation 中配置的 name 值必须唯一；<br>
子应用开发环境需要配置 publicPath；<br>
建议子应用将登录和路由配置上，exposes 的模块是路由对应的模块；<br>
主应用需要重新注册子应用的模块，无法直接加载子应用的路由，所以需要在主应用重新配置路由，参考 order；<br>
公共的方法、组件指令，放在自己应用中维护；</p> <h3 id="下面是主子应用交互的教程"><a href="#下面是主子应用交互的教程" class="header-anchor">#</a> 下面是主子应用交互的教程</h3> <p>从技术上讲，并没有主子应用之分，Module Federation是去中心化的一种微前端技术，各个应用之间可以相互 shared，相互 remote。从业务上看，erp 项目需要一个主应用来承载所有其他</p> <p>share 出来的模块，在主应用中展示。 因此，在 ERP 中，主应用的职责是展示最终的页面，以及需要管理公共组件和公共指令。子应用就是各个模块的相关内容。</p> <h4 id="_1-公共组件和公共指令"><a href="#_1-公共组件和公共指令" class="header-anchor">#</a> 1. 公共组件和公共指令</h4> <p>公共组件和公共指令在主应用中维护，对应目录为src/components和src/directives下面，内容跟老代码一致。目前组件和指令可能不是最新的，等最终上线需要更新。</p> <p>通过 MF 暴露出公共组件和指令的方式，参考主应用 vue.config.js 文件，代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'erpMain'</span><span class="token punctuation">,</span> <span class="token comment">// Must be unique</span>
  filename<span class="token operator">:</span> <span class="token string">'remoteEntry.js'</span><span class="token punctuation">,</span>
  exposes<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'./share-components'</span><span class="token operator">:</span> <span class="token string">'./src/shared/components.js'</span><span class="token punctuation">,</span> <span class="token comment">// 公共组件</span>
    <span class="token string">'./share-directives'</span><span class="token operator">:</span> <span class="token string">'./src/shared/directives.js'</span><span class="token punctuation">,</span> <span class="token comment">// 公共指令</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  remotes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-子应用开发环境加载主应用的公共组件和指令"><a href="#_2-子应用开发环境加载主应用的公共组件和指令" class="header-anchor">#</a> 2. 子应用开发环境加载主应用的公共组件和指令</h4> <p>子应用中需要使用公共的组件和指令，需要在加载初期全局注册，但是公共组件和指令存放在主应用，需通过 MF 远程加载，再全局注册，这可能会出现，页面已经渲染完成，某个公共组件才加载成功，页面渲染显然无法达到预期效果。</p> <p>因此，需要在页面渲染前，将远程组件先加载，然后注册到全局，再进行渲染。</p> <p>下载远程组件，全局注册，代码如下（参考 order 应用中src/plugins/installRouter.js文件）：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 设置前卫路由
 * @param {*} url module federation url
 */</span>
<span class="token keyword">function</span> <span class="token function">setBeforeRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    NProgress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
    <span class="token keyword">const</span> url <span class="token operator">=</span>
      process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span>
        <span class="token operator">?</span> <span class="token string">'http://localhost:4000/remoteEntry.js'</span>
        <span class="token operator">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin <span class="token operator">+</span> <span class="token string">'/main/remoteEntry.js'</span>
 
    <span class="token function">remoteComponent</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> to<span class="token punctuation">,</span> next<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
 
<span class="token comment">/**
 * 下载远程组件
 * @param {*} url remote url
 * @param {*} to
 * @param {*} next
 */</span>
<span class="token keyword">function</span> <span class="token function">remoteComponent</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> to<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token function">loadRemoteComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token punctuation">,</span>
      scope<span class="token operator">:</span> <span class="token string">'erpMain'</span><span class="token punctuation">,</span>
      module<span class="token operator">:</span> <span class="token string">'./share-components'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">loadRemoteComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token punctuation">,</span>
      scope<span class="token operator">:</span> <span class="token string">'erpMain'</span><span class="token punctuation">,</span>
      module<span class="token operator">:</span> <span class="token string">'./share-directives'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> shareComponents <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> shareDirectives <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
 
    <span class="token comment">// 全局注册share组件</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>shareComponents<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> component <span class="token operator">=</span> shareComponents<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> component<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
 
    <span class="token comment">// 全局注册share指令</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>shareDirectives<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> directive <span class="token operator">=</span> shareDirectives<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>directive<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
 
    <span class="token comment">// 组件加载成功在执行全局前置守卫</span>
    <span class="token function">setRouter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> next<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
通过以上的方法便能在子应用中加载主应用的公共组件和指令。详细代码参考 order 应用。
</code></pre></div><h4 id="_3、主应用加载子应用模块"><a href="#_3、主应用加载子应用模块" class="header-anchor">#</a> 3、主应用加载子应用模块</h4> <p>在主应用加载子应用模块前，需要确认子应用通过 MF exposes 出了对应模块，代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>exposes<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">'./PendingOrder'</span><span class="token operator">:</span> <span class="token string">'./src/views/pendingOrder/index.vue'</span><span class="token punctuation">,</span>
  <span class="token string">'./AllOrders'</span><span class="token operator">:</span> <span class="token string">'./src/views/allOrders/index.vue'</span><span class="token punctuation">,</span>
  <span class="token string">'./SaleService'</span><span class="token operator">:</span> <span class="token string">'./src/views/saleService/index.vue'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>主应用动态将将子应用 share 出来的模块，放在主应用中的路由中加载，所以需要在主应用中重新配置路由，在 router/module/index.js 配置属于自己模块的文件，部分代码如下：</p> <h4 id="动态下载远程组件入口"><a href="#动态下载远程组件入口" class="header-anchor">#</a> 动态下载远程组件入口：</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 动态加载远程组件，配置动态路由
 * @returns Array&lt;Promise&gt; 返回一个Promise数组路由配置
 */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">dynamicComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 动态下载远程组件</span>
  <span class="token comment">// 每新增一个模块，promise all中需要新增该模块远程下载配置，可参考order模块</span>
  <span class="token keyword">const</span> remoteComponents <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token function">remoteOrderComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      appName<span class="token operator">:</span> <span class="token string">'order'</span><span class="token punctuation">,</span> <span class="token comment">// 所在应用的名称，必须和网关一致，下面会有具体介绍</span>
      scope<span class="token operator">:</span> <span class="token string">'erpOrder'</span><span class="token punctuation">,</span> <span class="token comment">// Module federation 的 name</span>
      module<span class="token operator">:</span> <span class="token string">'./OrderComponents'</span><span class="token punctuation">,</span> <span class="token comment">// Module federation 的 exposes中暴露出来的key值</span>
      localPort<span class="token operator">:</span> <span class="token string">'8001'</span><span class="token punctuation">,</span> <span class="token comment">// 本地调试的端口号</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
 
  <span class="token comment">// order模块配置动态路由</span>
  <span class="token keyword">const</span> orderComponents <span class="token operator">=</span> <span class="token function">configOrderRouters</span><span class="token punctuation">(</span>remoteComponents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token comment">// ... 如果有其他模块接着设置，注意这儿使用的时Promise.all，注意顺序</span>
 
  <span class="token comment">// 每新增模块，将该模块配置的动态路由信息，解构到返回参数中，参考order模块</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>orderComponents<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="订单模块下载远程组件配置-如果其他模块参照order模块配置"><a href="#订单模块下载远程组件配置-如果其他模块参照order模块配置" class="header-anchor">#</a> 订单模块下载远程组件配置（如果其他模块参照order模块配置）：</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取order remote 出来的模块
 * @param {dev} 当前环境，如dev，qa，qa2等
 * @returns order模块暴露出来的组件
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">remoteOrderComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> appName<span class="token punctuation">,</span> scope<span class="token punctuation">,</span> module<span class="token punctuation">,</span> localPort <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 根据环境获取远程组件的下载地址</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span>
      <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>localPort <span class="token operator">||</span> <span class="token string">'8000'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/remoteEntry.js</span><span class="token template-punctuation string">`</span></span> <span class="token comment">// 本地远程地址建议都是用8000端口，因为这儿是公共方法</span>
      <span class="token operator">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>appName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/remoteEntry.js</span><span class="token template-punctuation string">`</span></span>
 
  <span class="token comment">// 下载远程组件</span>
  <span class="token keyword">return</span> <span class="token function">loadRemoteComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token punctuation">,</span>
    scope<span class="token punctuation">,</span>
    module<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="配置动态路由"><a href="#配置动态路由" class="header-anchor">#</a> 配置动态路由：</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 根据远程拿到的order模块设置主应用的动态路由
 * @param {*} orderComponents order远程组件
 * @returns order路由配置
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">configOrderRouters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">orderComponents</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'订单管理'</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> <span class="token string">'/order'</span><span class="token punctuation">,</span>
      icon<span class="token operator">:</span> <span class="token string">'order'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@views/layout/Layout.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      authority<span class="token operator">:</span> <span class="token string">'orderManager'</span><span class="token punctuation">,</span>
      meta<span class="token operator">:</span> <span class="token punctuation">{</span>
        noRoute<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'待处理'</span><span class="token punctuation">,</span>
          path<span class="token operator">:</span> <span class="token string">'pending-order'</span><span class="token punctuation">,</span>
          icon<span class="token operator">:</span> <span class="token string">'circle-o'</span><span class="token punctuation">,</span>
          component<span class="token operator">:</span> orderComponents<span class="token punctuation">.</span>PendingOrder<span class="token punctuation">,</span>
          authority<span class="token operator">:</span> <span class="token string">'pendingOrder'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">]</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="下面是每个项目必须按照要求做的"><a href="#下面是每个项目必须按照要求做的" class="header-anchor">#</a> 下面是每个项目必须按照要求做的</h4> <ul><li>在 gitlab 上创建应用时，项目名称很重要，要求：项目名称 = erp-${当前项目名称}-frontend，因为远程下载组件需要有规律的 url 地址。如：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>主应用： erp<span class="token operator">-</span>main<span class="token operator">-</span>frontend
 
order应用：erp<span class="token operator">-</span>order<span class="token operator">-</span>frontend
</code></pre></div><ul><li>每个项目的项目名称，必须在package.json的name属性上设置，如：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>主应用<span class="token keyword">package</span><span class="token punctuation">.</span>json：
<span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'main'</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
 
order应用<span class="token keyword">package</span><span class="token punctuation">.</span>json：
<span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'order'</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>每个项目中的 nginx 有一点异同，在文件nginx.conf中的 73 行，参考下面：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>location <span class="token operator">/</span> <span class="token punctuation">{</span>
  root   <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>html<span class="token punctuation">;</span>
  index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
  try_files $uri $uri<span class="token operator">/</span> <span class="token operator">/</span>main<span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>  <span class="token comment">// 这儿的main换成上面package设置的name值</span>
 
  add_header <span class="token string">'Access-Control-Allow-Origin'</span> <span class="token string">'*'</span><span class="token punctuation">;</span>
  add_header <span class="token string">'Access-Control-Allow-Methods'</span> <span class="token string">'*'</span><span class="token punctuation">;</span>
  add_header <span class="token string">'Access-Control-Allow-Credentials'</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">;</span>
  add_header Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Headers <span class="token constant">X</span><span class="token operator">-</span>Requested<span class="token operator">-</span>With<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>页面最终展示是通过 Nginx 代理设置的，这儿使用一个空项目进行代理，所以每新建一个项目需要在这里设置代理地址，并重新构建代理项目，在nginx.conf中，加上新项目配置即可，如下</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ...</span>
 
upstream api<span class="token operator">-</span>main <span class="token punctuation">{</span>
  server erp<span class="token operator">-</span>main<span class="token operator">-</span>frontend<span class="token operator">:</span><span class="token number">80</span><span class="token punctuation">;</span>
  keepalive <span class="token number">512</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
upstream api<span class="token operator">-</span>order <span class="token punctuation">{</span> <span class="token comment">// erp-名称</span>
  server erp<span class="token operator">-</span>order<span class="token operator">-</span>frontend<span class="token operator">:</span><span class="token number">80</span><span class="token punctuation">;</span> <span class="token comment">// erp-名称-frontend:80</span>
  keepalive <span class="token number">512</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// 在这儿添加一个 upstream</span>
 
<span class="token comment">// ...</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vueperss-lxxue-blog /learning/npmPublic/docsify.html" class="prev">
        docsify
      </a></span> <span class="next"><a href="/vueperss-lxxue-blog /learning/sourceCode/promise.html">
        promise
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div class="cat-container" data-v-a13867c0><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-a13867c0></canvas></div></div></div>
    <script src="/vueperss-lxxue-blog /assets/js/app.3155d336.js" defer></script><script src="/vueperss-lxxue-blog /assets/js/2.ac09cdb1.js" defer></script><script src="/vueperss-lxxue-blog /assets/js/17.5b9f9268.js" defer></script>
  </body>
</html>
